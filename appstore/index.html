<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kho Ứng Dụng Cho iPhone/iPad</title>
    <link rel="icon" href="https://i.imgur.com/k0zikhA.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    XSpace Store
                </a>
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Tìm kiếm ứng dụng...">
                </div>
                <div class="user-actions">
                    <!-- Thêm icon chuyển đổi chế độ sáng/tối -->
                    <button class="icon-btn theme-toggle" id="themeToggle">
                        <i class="fas fa-sun theme-icon sun-icon"></i>
                        <i class="fas fa-moon theme-icon moon-icon"></i>
                    </button>
                    <!-- Icon chuông mở liên kết Telegram -->
                    <a href="https://t.me/xspace_ipa" target="_blank" class="icon-btn" id="telegramBtn">
                        <i class="fas fa-bell"></i>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>Khám phá kho ứng dụng iPA đỉnh cao</h1>
                <p>Tận hưởng thế giới ứng dụng và trò chơi được tuyển chọn kỹ lưỡng, hoàn toàn miễn phí. Tải về các bản iPA chất lượng, mở khóa trải nghiệm mà trước đây bạn chưa từng thấy trong App Store.</p>
                <a href="#" class="cta-button">
                    <i class="fas fa-download"></i>
                    Khám phá ngay
                </a>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container">
        <!-- Featured App -->
        <section class="featured-section">
            <div class="featured-card">
                <div class="featured-badge">Ứng dụng nổi bật</div>
                <h3 class="featured-title">XSPace Store</h3>
                <p class="featured-description">Kho ứng dụng cao cấp với hàng ngàn app độc quyền</p>
                <button class="download-btn">
                    <i class="fas fa-download"></i>
                    Khám phá ngay
                </button>
                <img src="https://i.imgur.com/1qBtbYR.png" 
                     alt="XSPace Store" class="featured-image">
            </div>
        </section>

        <!-- Categories -->
        <section class="categories-section">
            <div class="section-title">
                <span>Thể loại</span>
                <a href="#" class="view-all">Xem tất cả</a>
            </div>
            <div class="categories-scroll">
                <div class="category-card active" data-category="all">
                    <div class="category-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="category-name">Tất cả</div>
                </div>
                <div class="category-card" data-category="game">
                    <div class="category-icon">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <div class="category-name">Trò chơi</div>
                </div>
                <div class="category-card" data-category="social">
                    <div class="category-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="category-name">Mạng xã hội</div>
                </div>
                <div class="category-card" data-category="entertainment">
                    <div class="category-icon">
                        <i class="fas fa-film"></i>
                    </div>
                    <div class="category-name">Giải trí</div>
                </div>
                <div class="category-card" data-category="photo">
                    <div class="category-icon">
                        <i class="fas fa-camera"></i>
                    </div>
                    <div class="category-name">Chụp ảnh</div>
                </div>
                <div class="category-card" data-category="clone">
                    <div class="category-icon">
                        <i class="fas fa-copy"></i>
                    </div>
                    <div class="category-name">Nhân bản</div>
                </div>
                <!-- Mở khoá Premium -->
                <div class="category-card" data-category="premium">
                    <div class="category-icon">
                        <i class="fas fa-unlock"></i>
                    </div>
                    <div class="category-name">Mở khoá Premium</div>
                </div>
            </div>
        </section>

        <!-- Apps Section -->
        <section class="apps-section">
            <div class="section-title">
                <span id="sectionTitle">Ứng dụng mới</span>
                <a href="#" class="view-all">Xem thêm</a>
            </div>
            <div class="apps-grid" id="appsGrid">
                <!-- Skeleton loading sẽ được thêm bằng JavaScript -->
            </div>
        </section>

        <!-- Popular Games -->
        <section class="apps-section" id="gamesSection">
            <div class="section-title">
                <span>Trò chơi phổ biến</span>
                <a href="#" class="view-all">Xem thêm</a>
            </div>
            <div class="apps-grid" id="gamesGrid">
                <!-- Games will be loaded here -->
            </div>
        </section>
    </main>

    <!-- Search Modal -->
    <div class="search-modal" id="searchModal">
        <div class="search-modal-content">
            <div class="search-modal-header">
                <button class="close-search" id="closeSearch">
                    <i class="fas fa-times"></i>
                </button>
                <input type="text" class="search-modal-input" id="searchModalInput" placeholder="Tìm kiếm ứng dụng...">
            </div>
            <div class="search-results" id="searchResults">
                <!-- Kết quả tìm kiếm sẽ hiển thị ở đây -->
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="container">
            <div class="nav-items">
                <a href="#" class="nav-item active" data-view="home">
                    <div class="nav-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <div class="nav-label">Trang chủ</div>
                </a>
                <a href="#" class="nav-item" data-view="today">
                    <div class="nav-icon">
                        <i class="fas fa-calendar-day"></i>
                    </div>
                    <div class="nav-label">Hôm nay</div>
                </a>
                <a href="#" class="nav-item" data-view="search" id="searchNavItem">
                    <div class="nav-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="nav-label">Tìm kiếm</div>
                </a>
                <a href="#" class="nav-item" data-view="games">
                    <div class="nav-icon">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <div class="nav-label">Trò chơi</div>
                </a>
                <a href="account.html" class="nav-item">
                    <div class="nav-icon">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="nav-label">Tài khoản</div>
                </a>
            </div>
        </div>
    </nav>

    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/app.js"></script>
    <script src="js/firebase-analytics.js"></script>
    
    <!-- JavaScript cho chế độ sáng/tối -->
    <script>
        // Quản lý chế độ sáng/tối
        class ThemeManager {
            constructor() {
                this.themeToggle = document.getElementById('themeToggle');
                this.htmlElement = document.documentElement;
                this.init();
            }
            
            init() {
                // Kiểm tra theme đã lưu
                const savedTheme = localStorage.getItem('theme');
                
                // Áp dụng theme đã lưu hoặc mặc định (light)
                if (savedTheme) {
                    this.setTheme(savedTheme);
                } else {
                    // Mặc định là light mode
                    this.setTheme('light');
                }
                
                // Thêm sự kiện click cho nút chuyển đổi
                this.themeToggle.addEventListener('click', () => this.toggleTheme());
                
                // Thêm class để animation mượt mà
                setTimeout(() => {
                    document.body.classList.add('theme-transition');
                }, 100);
            }
            
            setTheme(theme) {
                const isDark = theme === 'dark';
                this.htmlElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                
                // Cập nhật icon
                this.updateThemeIcon(isDark);
            }
            
            toggleTheme() {
                const currentTheme = this.htmlElement.getAttribute('data-theme');
                const isDark = currentTheme === 'dark';
                this.setTheme(isDark ? 'light' : 'dark');
                
                // Thêm hiệu ứng ripple cho nút bấm
                this.createRippleEffect(event);
            }
            
            updateThemeIcon(isDark) {
                const sunIcon = this.themeToggle.querySelector('.sun-icon');
                const moonIcon = this.themeToggle.querySelector('.moon-icon');
                
                if (isDark) {
                    sunIcon.style.opacity = '0';
                    sunIcon.style.transform = 'rotate(90deg)';
                    moonIcon.style.opacity = '1';
                    moonIcon.style.transform = 'rotate(0deg)';
                } else {
                    sunIcon.style.opacity = '1';
                    sunIcon.style.transform = 'rotate(0deg)';
                    moonIcon.style.opacity = '0';
                    moonIcon.style.transform = 'rotate(-90deg)';
                }
            }
            
            createRippleEffect(event) {
                const button = event.currentTarget;
                const circle = document.createElement('span');
                const diameter = Math.max(button.clientWidth, button.clientHeight);
                const radius = diameter / 2;
                
                circle.style.width = circle.style.height = `${diameter}px`;
                circle.style.left = `${event.clientX - button.getBoundingClientRect().left - radius}px`;
                circle.style.top = `${event.clientY - button.getBoundingClientRect().top - radius}px`;
                circle.classList.add('ripple');
                
                const ripple = button.getElementsByClassName('ripple')[0];
                if (ripple) {
                    ripple.remove();
                }
                
                button.appendChild(circle);
            }
        }
        
        // Quản lý chức năng Telegram
        class TelegramManager {
            constructor() {
                this.telegramBtn = document.getElementById('telegramBtn');
                this.init();
            }
            
            init() {
                // Thêm hiệu ứng hover cho nút Telegram
                this.telegramBtn.addEventListener('mouseenter', () => {
                    this.telegramBtn.style.transform = 'scale(1.1) rotate(15deg)';
                    this.telegramBtn.querySelector('i').style.transform = 'scale(1.2)';
                });
                
                this.telegramBtn.addEventListener('mouseleave', () => {
                    this.telegramBtn.style.transform = '';
                    this.telegramBtn.querySelector('i').style.transform = '';
                });
                
                // Thêm hiệu ứng click
                this.telegramBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    window.open(this.telegramBtn.href, '_blank');
                    
                    // Thêm hiệu ứng click
                    this.telegramBtn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.telegramBtn.style.transform = '';
                    }, 200);
                });
            }
        }
        
        // Khởi tạo khi trang được tải
        document.addEventListener('DOMContentLoaded', () => {
            const themeManager = new ThemeManager();
            const telegramManager = new TelegramManager();
            
            // Thêm CSS cho ripple effect
            const style = document.createElement('style');
            style.textContent = `
                .ripple {
                    position: absolute;
                    border-radius: 50%;
                    background: rgba(255, 255, 255, 0.7);
                    transform: scale(0);
                    animation: ripple-animation 0.6s linear;
                }
                
                @keyframes ripple-animation {
                    to {
                        transform: scale(4);
                        opacity: 0;
                    }
                }
                
                .theme-toggle {
                    position: relative;
                    overflow: hidden;
                }
            `;
            document.head.appendChild(style);
        });
        
        // Thêm hiệu ứng cho các nút khi hover
        document.querySelectorAll('.icon-btn').forEach(button => {
            button.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px) scale(1.05)';
            });
            
            button.addEventListener('mouseleave', function() {
                this.style.transform = '';
            });
        });
    </script>
</body>
</html>
